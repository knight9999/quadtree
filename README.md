quadtree
===============

# 4分木

## サンプルコード

サンプルでは200個のオブジェクト(Square)を生成し、それをランダムに500x500のキャンパス上に配置する。

そして、次の4つの方法でオブジェクト同士の衝突をチェックする。

* Naiveな比較 O(N^2)
* 4分木 LVL 1
* 4分木 LVL 2
* 4分木 LVL 3
* 4分木 LVL 4

実行は

```
$ python compare.py
```

それぞれの結果がresult0.png,result1.png,result2.png,result3.png,result4.pngで出力される。

なお、計算結果はどれも同じなので、上記の画像は全て同じ。異なるのは、計算速度のみ。


## 各ファイルの説明

### square.py

四角いオブジェクトを表す。
オブジェクト同士の衝突をチェックするcollideを持つ。
また、Squareのリストから、衝突しているペアを求める`getPairs`メソッドを持つ。これは、O(N^2)の時間のかかるナイーブな方法で求めている。

### morton.py

本プロジェクトの主要なクラスであるMortonを定義している。
Mortonは、最初にMax+1レベルを設定する。レベル1は一切分割しない。レベル2は4分割、レベル3は16分割、、、、となる。

`getMortonCoordinate`は与えられた(x,y)の点を、Maxレベルでのモートン座標での位置に変換する。

`getObjectLvlAndObjectCoordinate`は、与えられたモートン座標であわわされる２点(m1,m2)を含む最小のレベルのモートン座標に対応するindexを計算する。
このindexは、レベル0のインデックスが0、レベル1のインデックスが1,2,3,4、レベル2のインデックスが5,6,...,20、レベル3のインデックスが21,...84、、、
となる。

### quadtree.py

Mortonクラスを使って、与えられたSquareのリストから、衝突しているペアを求める`getPairs`メソッドを持つ。利用するMortonレベルの最大値+1を設定する。


### compare.py

サンプルコード
